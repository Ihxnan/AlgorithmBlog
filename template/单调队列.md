# 单调队列（deque）

高效求解「滑动窗口 / 子区间最值」问题的数据结构。单次区间最值查询 $O(1)$。

## deque 常用操作

### 定义

```cpp
template <
	class T,
	class Allocator = std::allocator<T>
> class deque;
```

### 操作

```cpp
reference operator[](size_t pos); // O(1) 大常数

// O(1)
reference front();
reference back(); 

// O(1)
void push_front(const T &value);
void push_back(const T &value);
void pop_front();
void pop_back();
```

## 示例

#### 求所有长度为k的子区间的最大值

#### 与单调栈类似，为了便于操作一般存下标

```cpp
vector<int> arr(n);
deque<int> ma;

for (int i = 0; i < k - 1; ++i)
{
    while (ma.size() && arr[i] >= arr[ma.back()])
        ma.pop_back();
    ma.push_back(i);
}
for (int i = k - 1, j = 0; i < n; ++i, ++j)
{
    while (ma.size() && arr[i] >= arr[ma.back()])
        ma.pop_back();
    ma.push_back(i);
    if (ma.front() < j)
        ma.pop_front();
    cout << j << "~" << i << " : " << arr[ma.front()] << endl;
}
```



